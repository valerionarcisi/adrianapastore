---
import PostCard from "../components/PostCard.astro";
import Welcome from "../components/Welcome.astro";
import Layout from "../layouts/Layout.astro";
import { getBlogPosts } from "../lib/hygraph";

const recentPosts = await getBlogPosts(4);
---

<Layout title="Home">
  <Welcome/>
  <section class="recent-posts">
    <h2>Articoli Recenti</h2>
    <div class="posts-grid">
      {recentPosts.map((post) => <PostCard post={post} />)}
    </div>
  </section>
</Layout>

<style>
  .recent-posts {
    margin: 0 auto;
    max-width: var(--container-max-width);
    padding: 0 var(--container-padding);
    margin-bottom: var(--container-padding);
    h2 {
      text-align: center;
    }
  }
  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  @media (max-width: 768px) {
    .posts-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
